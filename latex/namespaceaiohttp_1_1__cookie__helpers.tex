\doxysection{aiohttp.\+\_\+cookie\+\_\+helpers Namespace Reference}
\hypertarget{namespaceaiohttp_1_1__cookie__helpers}{}\label{namespaceaiohttp_1_1__cookie__helpers}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Morsel\mbox{[}str\mbox{]} \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a2f47e6e03cdbf2c8821c47eb4fc30dd7}{preserve\+\_\+morsel\+\_\+with\+\_\+coded\+\_\+value}} (Morsel\mbox{[}str\mbox{]} cookie)
\item 
str \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a2a966d033af95297bf3eb3108655c71d}{\+\_\+unquote\+\_\+replace}} (re.\+Match\mbox{[}str\mbox{]} m)
\item 
str \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_ae3e3f60d3731427d6301b48d9d1821d8}{\+\_\+unquote}} (str value)
\item 
List\mbox{[}Tuple\mbox{[}str, Morsel\mbox{[}str\mbox{]}\mbox{]}\mbox{]} \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_ae296aba581c75742772a4b1b897ac0dd}{parse\+\_\+cookie\+\_\+header}} (str header)
\item 
List\mbox{[}Tuple\mbox{[}str, Morsel\mbox{[}str\mbox{]}\mbox{]}\mbox{]} \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_add0682843bbf4b52448b85417b8efffd}{parse\+\_\+set\+\_\+cookie\+\_\+headers}} (Sequence\mbox{[}str\mbox{]} headers)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
tuple \mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_af9ce4d3f039415f5c38d64263f804879}{\+\_\+\+\_\+all\+\_\+\+\_\+}}
\item 
\mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a08103cf73de4376ca21f7ab0a473b9eb}{\+\_\+\+COOKIE\+\_\+\+NAME\+\_\+\+RE}} = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\mbox{[}!\#\$\%\&\textbackslash{}\textquotesingle{}()\texorpdfstring{$\ast$}{*}+\textbackslash{}-\/./0-\/9\+:$<$=$>$?@A-\/Z\textbackslash{}\mbox{[}\textbackslash{}\mbox{]}\texorpdfstring{$^\wedge$}{\string^}\+\_\+\`{}a-\/z\{\texorpdfstring{$\vert$}{|}\}\texorpdfstring{$\sim$}{\string~}\mbox{]}+\$"{})
\item 
\mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a0e934275e0145e043a0f4f70eaea9d4c}{\+\_\+\+COOKIE\+\_\+\+KNOWN\+\_\+\+ATTRS}}
\item 
\mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a42522671b26eb4b03d454b8c15734064}{\+\_\+\+COOKIE\+\_\+\+BOOL\+\_\+\+ATTRS}}
\item 
\mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_a2005d39b53c0c535e954b6a879bba470}{\+\_\+\+COOKIE\+\_\+\+PATTERN}}
\item 
\mbox{\hyperlink{namespaceaiohttp_1_1__cookie__helpers_afbdd05071350d2a348f92502a0ad424b}{\+\_\+unquote\+\_\+sub}} = re.\+compile(r"{}\textbackslash{}\textbackslash{}(?\+:(\mbox{[}0-\/3\mbox{]}\mbox{[}0-\/7\mbox{]}\mbox{[}0-\/7\mbox{]})\texorpdfstring{$\vert$}{|}(.))"{}).sub
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Internal cookie handling helpers.

This module contains internal utilities for cookie parsing and manipulation.
These are not part of the public API and may change without notice.
\end{DoxyVerb}
 

\label{doc-func-members}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_ae3e3f60d3731427d6301b48d9d1821d8}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_unquote@{\_unquote}}
\index{\_unquote@{\_unquote}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_unquote()}{\_unquote()}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_ae3e3f60d3731427d6301b48d9d1821d8} 
 str aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+unquote (\begin{DoxyParamCaption}\item[{str}]{value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Unquote a cookie value.

Vendored from http.cookies._unquote to ensure compatibility.

Note: The original implementation checked for None, but we've removed
that check since all callers already ensure the value is not None.
\end{DoxyVerb}
 \Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a2a966d033af95297bf3eb3108655c71d}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_unquote\_replace@{\_unquote\_replace}}
\index{\_unquote\_replace@{\_unquote\_replace}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_unquote\_replace()}{\_unquote\_replace()}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a2a966d033af95297bf3eb3108655c71d} 
 str aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+unquote\+\_\+replace (\begin{DoxyParamCaption}\item[{re.\+Match\mbox{[}str\mbox{]}}]{m}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Replace function for _unquote_sub regex substitution.

Handles escaped characters in cookie values:
- Octal sequences are converted to their character representation
- Other escaped characters are unescaped by removing the backslash
\end{DoxyVerb}
 \Hypertarget{namespaceaiohttp_1_1__cookie__helpers_ae296aba581c75742772a4b1b897ac0dd}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!parse\_cookie\_header@{parse\_cookie\_header}}
\index{parse\_cookie\_header@{parse\_cookie\_header}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{parse\_cookie\_header()}{parse\_cookie\_header()}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_ae296aba581c75742772a4b1b897ac0dd} 
 List\mbox{[}Tuple\mbox{[}str, Morsel\mbox{[}str\mbox{]}\mbox{]}\mbox{]} aiohttp.\+\_\+cookie\+\_\+helpers.\+parse\+\_\+cookie\+\_\+header (\begin{DoxyParamCaption}\item[{str}]{header}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse a Cookie header according to RFC 6265 Section 5.4.

Cookie headers contain only name-value pairs separated by semicolons.
There are no attributes in Cookie headers - even names that match
attribute names (like 'path' or 'secure') should be treated as cookies.

This parser uses the same regex-based approach as parse_set_cookie_headers
to properly handle quoted values that may contain semicolons. When the
regex fails to match a malformed cookie, it falls back to simple parsing
to ensure subsequent cookies are not lost
https://github.com/aio-libs/aiohttp/issues/11632

Args:
    header: The Cookie header value to parse

Returns:
    List of (name, Morsel) tuples for compatibility with SimpleCookie.update()
\end{DoxyVerb}
 \Hypertarget{namespaceaiohttp_1_1__cookie__helpers_add0682843bbf4b52448b85417b8efffd}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!parse\_set\_cookie\_headers@{parse\_set\_cookie\_headers}}
\index{parse\_set\_cookie\_headers@{parse\_set\_cookie\_headers}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{parse\_set\_cookie\_headers()}{parse\_set\_cookie\_headers()}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_add0682843bbf4b52448b85417b8efffd} 
 List\mbox{[}Tuple\mbox{[}str, Morsel\mbox{[}str\mbox{]}\mbox{]}\mbox{]} aiohttp.\+\_\+cookie\+\_\+helpers.\+parse\+\_\+set\+\_\+cookie\+\_\+headers (\begin{DoxyParamCaption}\item[{Sequence\mbox{[}str\mbox{]}}]{headers}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Parse cookie headers using a vendored version of SimpleCookie parsing.

This implementation is based on SimpleCookie.__parse_string to ensure
compatibility with how SimpleCookie parses cookies, including handling
of malformed cookies with missing semicolons.

This function is used for both Cookie and Set-Cookie headers in order to be
forgiving. Ideally we would have followed RFC 6265 Section 5.2 (for Cookie
headers) and RFC 6265 Section 4.2.1 (for Set-Cookie headers), but the
real world data makes it impossible since we need to be a bit more forgiving.

NOTE: This implementation differs from SimpleCookie in handling unmatched quotes.
SimpleCookie will stop parsing when it encounters a cookie value with an unmatched
quote (e.g., 'cookie="value'), causing subsequent cookies to be silently dropped.
This implementation handles unmatched quotes more gracefully to prevent cookie loss.
See https://github.com/aio-libs/aiohttp/issues/7993
\end{DoxyVerb}
 \Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a2f47e6e03cdbf2c8821c47eb4fc30dd7}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!preserve\_morsel\_with\_coded\_value@{preserve\_morsel\_with\_coded\_value}}
\index{preserve\_morsel\_with\_coded\_value@{preserve\_morsel\_with\_coded\_value}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{preserve\_morsel\_with\_coded\_value()}{preserve\_morsel\_with\_coded\_value()}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a2f47e6e03cdbf2c8821c47eb4fc30dd7} 
 Morsel\mbox{[}str\mbox{]} aiohttp.\+\_\+cookie\+\_\+helpers.\+preserve\+\_\+morsel\+\_\+with\+\_\+coded\+\_\+value (\begin{DoxyParamCaption}\item[{Morsel\mbox{[}str\mbox{]}}]{cookie}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Preserve a Morsel's coded_value exactly as received from the server.

This function ensures that cookie encoding is preserved exactly as sent by
the server, which is critical for compatibility with old servers that have
strict requirements about cookie formats.

This addresses the issue described in https://github.com/aio-libs/aiohttp/pull/1453
where Python's SimpleCookie would re-encode cookies, breaking authentication
with certain servers.

Args:
    cookie: A Morsel object from SimpleCookie

Returns:
    A Morsel object with preserved coded_value
\end{DoxyVerb}
 

\label{doc-var-members}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_af9ce4d3f039415f5c38d64263f804879}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_\_all\_\_@{\_\_all\_\_}}
\index{\_\_all\_\_@{\_\_all\_\_}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_\_all\_\_}{\_\_all\_\_}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_af9ce4d3f039415f5c38d64263f804879} 
tuple aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+\+\_\+all\+\_\+\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ (}
\DoxyCodeLine{00002\ \ \ \ \ \textcolor{stringliteral}{"{}parse\_set\_cookie\_headers"{}},}
\DoxyCodeLine{00003\ \ \ \ \ \textcolor{stringliteral}{"{}parse\_cookie\_header"{}},}
\DoxyCodeLine{00004\ \ \ \ \ \textcolor{stringliteral}{"{}preserve\_morsel\_with\_coded\_value"{}},}
\DoxyCodeLine{00005\ )}

\end{DoxyCode}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a42522671b26eb4b03d454b8c15734064}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_COOKIE\_BOOL\_ATTRS@{\_COOKIE\_BOOL\_ATTRS}}
\index{\_COOKIE\_BOOL\_ATTRS@{\_COOKIE\_BOOL\_ATTRS}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_COOKIE\_BOOL\_ATTRS}{\_COOKIE\_BOOL\_ATTRS}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a42522671b26eb4b03d454b8c15734064} 
aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+\+COOKIE\+\_\+\+BOOL\+\_\+\+ATTRS\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ frozenset(\ \ \textcolor{comment}{\#\ AKA\ Morsel.\_flags}}
\DoxyCodeLine{00002\ \ \ \ \ (\textcolor{stringliteral}{"{}secure"{}},\ \textcolor{stringliteral}{"{}httponly"{}},\ \textcolor{stringliteral}{"{}partitioned"{}})}
\DoxyCodeLine{00003\ )}

\end{DoxyCode}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a0e934275e0145e043a0f4f70eaea9d4c}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_COOKIE\_KNOWN\_ATTRS@{\_COOKIE\_KNOWN\_ATTRS}}
\index{\_COOKIE\_KNOWN\_ATTRS@{\_COOKIE\_KNOWN\_ATTRS}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_COOKIE\_KNOWN\_ATTRS}{\_COOKIE\_KNOWN\_ATTRS}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a0e934275e0145e043a0f4f70eaea9d4c} 
aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+\+COOKIE\+\_\+\+KNOWN\+\_\+\+ATTRS\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ frozenset(\ \ \textcolor{comment}{\#\ AKA\ Morsel.\_reserved}}
\DoxyCodeLine{00002\ \ \ \ \ (}
\DoxyCodeLine{00003\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}path"{}},}
\DoxyCodeLine{00004\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}domain"{}},}
\DoxyCodeLine{00005\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}max-\/age"{}},}
\DoxyCodeLine{00006\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}expires"{}},}
\DoxyCodeLine{00007\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}secure"{}},}
\DoxyCodeLine{00008\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}httponly"{}},}
\DoxyCodeLine{00009\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}samesite"{}},}
\DoxyCodeLine{00010\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}partitioned"{}},}
\DoxyCodeLine{00011\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}version"{}},}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}comment"{}},}
\DoxyCodeLine{00013\ \ \ \ \ )}
\DoxyCodeLine{00014\ )}

\end{DoxyCode}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a08103cf73de4376ca21f7ab0a473b9eb}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_COOKIE\_NAME\_RE@{\_COOKIE\_NAME\_RE}}
\index{\_COOKIE\_NAME\_RE@{\_COOKIE\_NAME\_RE}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_COOKIE\_NAME\_RE}{\_COOKIE\_NAME\_RE}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a08103cf73de4376ca21f7ab0a473b9eb} 
aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+\+COOKIE\+\_\+\+NAME\+\_\+\+RE = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\mbox{[}!\#\$\%\&\textbackslash{}\textquotesingle{}()\texorpdfstring{$\ast$}{*}+\textbackslash{}-\/./0-\/9\+:$<$=$>$?@A-\/Z\textbackslash{}\mbox{[}\textbackslash{}\mbox{]}\texorpdfstring{$^\wedge$}{\string^}\+\_\+\`{}a-\/z\{\texorpdfstring{$\vert$}{|}\}\texorpdfstring{$\sim$}{\string~}\mbox{]}+\$"{})\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_a2005d39b53c0c535e954b6a879bba470}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_COOKIE\_PATTERN@{\_COOKIE\_PATTERN}}
\index{\_COOKIE\_PATTERN@{\_COOKIE\_PATTERN}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_COOKIE\_PATTERN}{\_COOKIE\_PATTERN}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_a2005d39b53c0c535e954b6a879bba470} 
aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+\+COOKIE\+\_\+\+PATTERN\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ re.compile(}
\DoxyCodeLine{00002\ \ \ \ \ ,}
\DoxyCodeLine{00003\ \ \ \ \ re.VERBOSE\ |\ re.ASCII,}
\DoxyCodeLine{00004\ )}

\end{DoxyCode}
\Hypertarget{namespaceaiohttp_1_1__cookie__helpers_afbdd05071350d2a348f92502a0ad424b}\index{aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}!\_unquote\_sub@{\_unquote\_sub}}
\index{\_unquote\_sub@{\_unquote\_sub}!aiohttp.\_cookie\_helpers@{aiohttp.\_cookie\_helpers}}
\doxysubsubsection{\texorpdfstring{\_unquote\_sub}{\_unquote\_sub}}
{\footnotesize\ttfamily \label{namespaceaiohttp_1_1__cookie__helpers_afbdd05071350d2a348f92502a0ad424b} 
aiohttp.\+\_\+cookie\+\_\+helpers.\+\_\+unquote\+\_\+sub = re.\+compile(r"{}\textbackslash{}\textbackslash{}(?\+:(\mbox{[}0-\/3\mbox{]}\mbox{[}0-\/7\mbox{]}\mbox{[}0-\/7\mbox{]})\texorpdfstring{$\vert$}{|}(.))"{}).sub\hspace{0.3cm}{\ttfamily [protected]}}

