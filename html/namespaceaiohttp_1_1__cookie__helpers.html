<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: aiohttp._cookie_helpers Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('namespaceaiohttp_1_1__cookie__helpers.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">aiohttp._cookie_helpers Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2f47e6e03cdbf2c8821c47eb4fc30dd7" id="r_a2f47e6e03cdbf2c8821c47eb4fc30dd7"><td class="memItemLeft" align="right" valign="top">Morsel[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f47e6e03cdbf2c8821c47eb4fc30dd7">preserve_morsel_with_coded_value</a> (Morsel[str] cookie)</td></tr>
<tr class="memitem:a2a966d033af95297bf3eb3108655c71d" id="r_a2a966d033af95297bf3eb3108655c71d"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a966d033af95297bf3eb3108655c71d">_unquote_replace</a> (re.Match[str] m)</td></tr>
<tr class="memitem:ae3e3f60d3731427d6301b48d9d1821d8" id="r_ae3e3f60d3731427d6301b48d9d1821d8"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3e3f60d3731427d6301b48d9d1821d8">_unquote</a> (str value)</td></tr>
<tr class="memitem:ae296aba581c75742772a4b1b897ac0dd" id="r_ae296aba581c75742772a4b1b897ac0dd"><td class="memItemLeft" align="right" valign="top">List[Tuple[str, Morsel[str]]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae296aba581c75742772a4b1b897ac0dd">parse_cookie_header</a> (str header)</td></tr>
<tr class="memitem:add0682843bbf4b52448b85417b8efffd" id="r_add0682843bbf4b52448b85417b8efffd"><td class="memItemLeft" align="right" valign="top">List[Tuple[str, Morsel[str]]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add0682843bbf4b52448b85417b8efffd">parse_set_cookie_headers</a> (Sequence[str] headers)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af9ce4d3f039415f5c38d64263f804879" id="r_af9ce4d3f039415f5c38d64263f804879"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9ce4d3f039415f5c38d64263f804879">__all__</a></td></tr>
<tr class="memitem:a08103cf73de4376ca21f7ab0a473b9eb" id="r_a08103cf73de4376ca21f7ab0a473b9eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08103cf73de4376ca21f7ab0a473b9eb">_COOKIE_NAME_RE</a> = re.compile(r&quot;^[!#$%&amp;\'()*+\-./0-9:&lt;=&gt;?@A-Z\[\]^_`a-z{|}~]+$&quot;)</td></tr>
<tr class="memitem:a0e934275e0145e043a0f4f70eaea9d4c" id="r_a0e934275e0145e043a0f4f70eaea9d4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e934275e0145e043a0f4f70eaea9d4c">_COOKIE_KNOWN_ATTRS</a></td></tr>
<tr class="memitem:a42522671b26eb4b03d454b8c15734064" id="r_a42522671b26eb4b03d454b8c15734064"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42522671b26eb4b03d454b8c15734064">_COOKIE_BOOL_ATTRS</a></td></tr>
<tr class="memitem:a2005d39b53c0c535e954b6a879bba470" id="r_a2005d39b53c0c535e954b6a879bba470"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2005d39b53c0c535e954b6a879bba470">_COOKIE_PATTERN</a></td></tr>
<tr class="memitem:afbdd05071350d2a348f92502a0ad424b" id="r_afbdd05071350d2a348f92502a0ad424b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afbdd05071350d2a348f92502a0ad424b">_unquote_sub</a> = re.compile(r&quot;\\(?:([0-3][0-7][0-7])|(.))&quot;).sub</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Internal cookie handling helpers.

This module contains internal utilities for cookie parsing and manipulation.
These are not part of the public API and may change without notice.
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ae3e3f60d3731427d6301b48d9d1821d8" name="ae3e3f60d3731427d6301b48d9d1821d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e3f60d3731427d6301b48d9d1821d8">&#9670;&#160;</a></span>_unquote()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> str aiohttp._cookie_helpers._unquote </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Unquote a cookie value.

Vendored from http.cookies._unquote to ensure compatibility.

Note: The original implementation checked for None, but we've removed
that check since all callers already ensure the value is not None.
</pre> 
</div>
</div>
<a id="a2a966d033af95297bf3eb3108655c71d" name="a2a966d033af95297bf3eb3108655c71d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a966d033af95297bf3eb3108655c71d">&#9670;&#160;</a></span>_unquote_replace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> str aiohttp._cookie_helpers._unquote_replace </td>
          <td>(</td>
          <td class="paramtype">re.Match[str]</td>          <td class="paramname"><span class="paramname"><em>m</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Replace function for _unquote_sub regex substitution.

Handles escaped characters in cookie values:
- Octal sequences are converted to their character representation
- Other escaped characters are unescaped by removing the backslash
</pre> 
</div>
</div>
<a id="ae296aba581c75742772a4b1b897ac0dd" name="ae296aba581c75742772a4b1b897ac0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae296aba581c75742772a4b1b897ac0dd">&#9670;&#160;</a></span>parse_cookie_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> List[Tuple[str, Morsel[str]]] aiohttp._cookie_helpers.parse_cookie_header </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>header</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse a Cookie header according to RFC 6265 Section 5.4.

Cookie headers contain only name-value pairs separated by semicolons.
There are no attributes in Cookie headers - even names that match
attribute names (like 'path' or 'secure') should be treated as cookies.

This parser uses the same regex-based approach as parse_set_cookie_headers
to properly handle quoted values that may contain semicolons. When the
regex fails to match a malformed cookie, it falls back to simple parsing
to ensure subsequent cookies are not lost
https://github.com/aio-libs/aiohttp/issues/11632

Args:
    header: The Cookie header value to parse

Returns:
    List of (name, Morsel) tuples for compatibility with SimpleCookie.update()
</pre> 
</div>
</div>
<a id="add0682843bbf4b52448b85417b8efffd" name="add0682843bbf4b52448b85417b8efffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0682843bbf4b52448b85417b8efffd">&#9670;&#160;</a></span>parse_set_cookie_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> List[Tuple[str, Morsel[str]]] aiohttp._cookie_helpers.parse_set_cookie_headers </td>
          <td>(</td>
          <td class="paramtype">Sequence[str]</td>          <td class="paramname"><span class="paramname"><em>headers</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse cookie headers using a vendored version of SimpleCookie parsing.

This implementation is based on SimpleCookie.__parse_string to ensure
compatibility with how SimpleCookie parses cookies, including handling
of malformed cookies with missing semicolons.

This function is used for both Cookie and Set-Cookie headers in order to be
forgiving. Ideally we would have followed RFC 6265 Section 5.2 (for Cookie
headers) and RFC 6265 Section 4.2.1 (for Set-Cookie headers), but the
real world data makes it impossible since we need to be a bit more forgiving.

NOTE: This implementation differs from SimpleCookie in handling unmatched quotes.
SimpleCookie will stop parsing when it encounters a cookie value with an unmatched
quote (e.g., 'cookie="value'), causing subsequent cookies to be silently dropped.
This implementation handles unmatched quotes more gracefully to prevent cookie loss.
See https://github.com/aio-libs/aiohttp/issues/7993
</pre> 
</div>
</div>
<a id="a2f47e6e03cdbf2c8821c47eb4fc30dd7" name="a2f47e6e03cdbf2c8821c47eb4fc30dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f47e6e03cdbf2c8821c47eb4fc30dd7">&#9670;&#160;</a></span>preserve_morsel_with_coded_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Morsel[str] aiohttp._cookie_helpers.preserve_morsel_with_coded_value </td>
          <td>(</td>
          <td class="paramtype">Morsel[str]</td>          <td class="paramname"><span class="paramname"><em>cookie</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Preserve a Morsel's coded_value exactly as received from the server.

This function ensures that cookie encoding is preserved exactly as sent by
the server, which is critical for compatibility with old servers that have
strict requirements about cookie formats.

This addresses the issue described in https://github.com/aio-libs/aiohttp/pull/1453
where Python's SimpleCookie would re-encode cookies, breaking authentication
with certain servers.

Args:
    cookie: A Morsel object from SimpleCookie

Returns:
    A Morsel object with preserved coded_value
</pre> 
</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="af9ce4d3f039415f5c38d64263f804879" name="af9ce4d3f039415f5c38d64263f804879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ce4d3f039415f5c38d64263f804879">&#9670;&#160;</a></span>__all__</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tuple aiohttp._cookie_helpers.__all__</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  (</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;parse_set_cookie_headers&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;parse_cookie_header&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;preserve_morsel_with_coded_value&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a42522671b26eb4b03d454b8c15734064" name="a42522671b26eb4b03d454b8c15734064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42522671b26eb4b03d454b8c15734064">&#9670;&#160;</a></span>_COOKIE_BOOL_ATTRS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">aiohttp._cookie_helpers._COOKIE_BOOL_ATTRS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  frozenset(  <span class="comment"># AKA Morsel._flags</span></div>
<div class="line"><span class="lineno">    2</span>    (<span class="stringliteral">&quot;secure&quot;</span>, <span class="stringliteral">&quot;httponly&quot;</span>, <span class="stringliteral">&quot;partitioned&quot;</span>)</div>
<div class="line"><span class="lineno">    3</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e934275e0145e043a0f4f70eaea9d4c" name="a0e934275e0145e043a0f4f70eaea9d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e934275e0145e043a0f4f70eaea9d4c">&#9670;&#160;</a></span>_COOKIE_KNOWN_ATTRS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">aiohttp._cookie_helpers._COOKIE_KNOWN_ATTRS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  frozenset(  <span class="comment"># AKA Morsel._reserved</span></div>
<div class="line"><span class="lineno">    2</span>    (</div>
<div class="line"><span class="lineno">    3</span>        <span class="stringliteral">&quot;path&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>        <span class="stringliteral">&quot;domain&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>        <span class="stringliteral">&quot;max-age&quot;</span>,</div>
<div class="line"><span class="lineno">    6</span>        <span class="stringliteral">&quot;expires&quot;</span>,</div>
<div class="line"><span class="lineno">    7</span>        <span class="stringliteral">&quot;secure&quot;</span>,</div>
<div class="line"><span class="lineno">    8</span>        <span class="stringliteral">&quot;httponly&quot;</span>,</div>
<div class="line"><span class="lineno">    9</span>        <span class="stringliteral">&quot;samesite&quot;</span>,</div>
<div class="line"><span class="lineno">   10</span>        <span class="stringliteral">&quot;partitioned&quot;</span>,</div>
<div class="line"><span class="lineno">   11</span>        <span class="stringliteral">&quot;version&quot;</span>,</div>
<div class="line"><span class="lineno">   12</span>        <span class="stringliteral">&quot;comment&quot;</span>,</div>
<div class="line"><span class="lineno">   13</span>    )</div>
<div class="line"><span class="lineno">   14</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a08103cf73de4376ca21f7ab0a473b9eb" name="a08103cf73de4376ca21f7ab0a473b9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08103cf73de4376ca21f7ab0a473b9eb">&#9670;&#160;</a></span>_COOKIE_NAME_RE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">aiohttp._cookie_helpers._COOKIE_NAME_RE = re.compile(r&quot;^[!#$%&amp;\'()*+\-./0-9:&lt;=&gt;?@A-Z\[\]^_`a-z{|}~]+$&quot;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2005d39b53c0c535e954b6a879bba470" name="a2005d39b53c0c535e954b6a879bba470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2005d39b53c0c535e954b6a879bba470">&#9670;&#160;</a></span>_COOKIE_PATTERN</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">aiohttp._cookie_helpers._COOKIE_PATTERN</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  re.compile(</div>
<div class="line"><span class="lineno">    2</span>    ,</div>
<div class="line"><span class="lineno">    3</span>    re.VERBOSE | re.ASCII,</div>
<div class="line"><span class="lineno">    4</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="afbdd05071350d2a348f92502a0ad424b" name="afbdd05071350d2a348f92502a0ad424b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbdd05071350d2a348f92502a0ad424b">&#9670;&#160;</a></span>_unquote_sub</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">aiohttp._cookie_helpers._unquote_sub = re.compile(r&quot;\\(?:([0-3][0-7][0-7])|(.))&quot;).sub</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespaceaiohttp.html">aiohttp</a></li><li class="navelem"><a href="namespaceaiohttp_1_1__cookie__helpers.html">_cookie_helpers</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
